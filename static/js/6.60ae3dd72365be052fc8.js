webpackJsonp([6],{"g+8Z":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[{title:"项目ID",dataIndex:"id"},{title:"项目名称",dataIndex:"name"},{title:"项目代号",dataIndex:"code"},{title:"项目描述",dataIndex:"game_desc"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],s={data:function(){return{tip_visible:!0,columns:i,loading:!1,data:[],pagination:{pageSize:10},alter:{message:"数据加载中!",type:"info"},visible:!1,name:"",code:"",game_desc:"",game:"1",drawer_visible:!1,edit_visible:!1,edit_id:0}},methods:{showDrawer:function(){this.drawer_visible=!0},onClose:function(){this.drawer_visible=!1},showModal:function(){this.visible=!0},fetch:function(){var t=this;this.$http.get("index.php?a=Api&m=getGameList").then(function(e){t.loading=!1,200==e.data.status?(t.data=e.data.data,t.alter={message:"加载成功!",type:"success"}):t.alter={message:e.data.msg,type:"error"}})},editGame:function(t){console.log(t),this.edit_visible=!0,this.name=t.name,this.code=t.code,this.game_desc=t.game_desc,this.edit_id=t.id},handleOk:function(){var t=this;if(""==this.name)return this.$error({title:"非法的项目名称",content:"项目名称不可以为空，请重新输入..."}),!1;if(!/^[a-zA-Z0-9_-]{3,16}$/.test(this.code))return this.$error({title:"非法的项目代码",content:"必须是3到16位（字母，数字，下划线，减号）..."}),!1;if(""==this.game_desc)return this.$error({title:"非法的项目描述",content:"项目描述不可以为空，请重新输入..."}),!1;this.visible=!1,this.$message.loading("添加中...",0);var e={name:this.name,code:this.code,game_desc:this.game_desc};this.$http.post("index.php?a=Api&m=addGame",e).then(function(e){t.$message.destroy(),200==e.data.status?(t.$success({title:"添加项目成功!"}),t.fetch()):t.$message.error("添加项目失败!",2)})},handleEdit:function(){var t=this;if(""==this.name)return this.$error({title:"非法的项目名称",content:"项目名称不可以为空，请重新输入..."}),!1;if(!/^[a-zA-Z0-9_-]{3,16}$/.test(this.code))return this.$error({title:"非法的项目代码",content:"必须是3到16位（字母，数字，下划线，减号）..."}),!1;if(""==this.game_desc)return this.$error({title:"非法的项目描述",content:"项目描述不可以为空，请重新输入..."}),!1;this.edit_visible=!1,this.$message.loading("修改中...",0);var e={id:this.edit_id,name:this.name,code:this.code,game_desc:this.game_desc};this.$http.post("index.php?a=Api&m=updateGame",e).then(function(e){t.$message.destroy(),200==e.data.status?(t.$success({title:"更新项目成功!"}),t.fetch()):t.$error({title:"更新项目失败!",content:"失败原因是:"+e.data.msg})})},handleCancel:function(){this.visible=!1,this.edit_visible=!1,this.$message.destroy()},editApi:function(t){console.log("api_id:"+t),this.$router.push("/api/apiList/"+t)}},mounted:function(){this.fetch()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"com-item"},[a("a-button",{attrs:{type:"primary"},on:{click:t.showModal}},[a("a-icon",{attrs:{type:"plus"}}),t._v("添加项目")],1),t._v(" "),a("a-alert",{staticStyle:{margin:"12px 0"},attrs:{message:t.alter.message,type:t.alter.type,showIcon:"",closable:""}}),t._v(" "),a("a-table",{attrs:{columns:t.columns,dataSource:t.data,pagination:t.pagination,loading:t.loading},scopedSlots:t._u([{key:"action",fn:function(e,i){return a("span",{},[a("a-button",{attrs:{type:"dashed"},on:{click:function(a){t.editGame(e)}}},[t._v("编辑")]),t._v(" "),a("a-button",{attrs:{type:"dashed"},on:{click:function(e){t.editApi(i.id)}}},[t._v("API管理")])],1)}}])}),t._v(" "),a("a-modal",{attrs:{title:"添加项目"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-alert",{staticStyle:{"margin-bottom":"12px"},attrs:{message:"若项目下已注册有API，则该项目不可删除!",banner:""}}),t._v(" "),a("a-form",[a("a-form-item",{staticStyle:{"margin-bottom":"12px"}},[a("a-input",{attrs:{placeholder:"请输入项目名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("a-form-item",{staticStyle:{"margin-bottom":"12px"}},[a("a-input",{attrs:{placeholder:"请输入项目代号"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),t._v(" "),a("a-form-item",{staticStyle:{"margin-bottom":"12px"}},[a("a-input",{attrs:{placeholder:"请输入项目简要描述"},model:{value:t.game_desc,callback:function(e){t.game_desc=e},expression:"game_desc"}})],1)],1),t._v(" "),a("template",{slot:"footer"},[a("a-button",{on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),a("a-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("确认添加")])],1)],2),t._v(" "),a("a-modal",{attrs:{title:"编辑项目"},model:{value:t.edit_visible,callback:function(e){t.edit_visible=e},expression:"edit_visible"}},[a("a-alert",{staticStyle:{"margin-bottom":"12px"},attrs:{message:"若项目下已注册有API，则该项目不可删除!",banner:""}}),t._v(" "),a("a-form",[a("a-form-item",{staticStyle:{"margin-bottom":"12px"}},[a("a-input",{model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("a-form-item",{staticStyle:{"margin-bottom":"12px"}},[a("a-input",{model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),t._v(" "),a("a-form-item",{staticStyle:{"margin-bottom":"12px"}},[a("a-input",{model:{value:t.game_desc,callback:function(e){t.game_desc=e},expression:"game_desc"}})],1)],1),t._v(" "),a("template",{slot:"footer"},[a("a-button",{on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),a("a-button",{attrs:{type:"primary"},on:{click:t.handleEdit}},[t._v("确认修改")])],1)],2),t._v(" "),a("a-drawer",{attrs:{title:"权限编辑",placement:"left",closable:!1,visible:t.drawer_visible,closable:"",width:"60%"},on:{close:t.onClose}},[a("a-tabs",{attrs:{defaultActiveKey:"1",tabPosition:"left"}},[a("a-tab-pane",{key:"1",attrs:{tab:"Tab 1"}},[t._v("Content of Tab 1")]),t._v(" "),a("a-tab-pane",{key:"2",attrs:{tab:"Tab 2"}},[t._v("Content of Tab 2")]),t._v(" "),a("a-tab-pane",{key:"3",attrs:{tab:"Tab 3"}},[t._v("Content of Tab 3")])],1)],1)],1)},staticRenderFns:[]},o=a("VU/8")(s,n,!1,null,null,null);e.default=o.exports}});