webpackJsonp([10],{JstH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=[{title:"API_ID",dataIndex:"id"},{title:"所属游戏",dataIndex:"game",scopedSlots:{customRender:"game"}},{title:"API名称",dataIndex:"api_name"},{title:"API描述",dataIndex:"api_desc"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],s={data:function(){return{user_name:"",game_id:"",columns:n,loading:!1,data:[],pagination:{pageSize:10},alter:{message:"数据加载中!",type:"info"},edit_game_name:"",keyword:""}},computed:{table_data:function(){var t=this;return""==this.keyword?this.data:this.data.filter(function(e){return-1!=e.api_name.indexOf(t.keyword)})}},methods:{onChange:function(t,e){var a=this;console.log(e,t);var n={api_id:e,user_name:this.user_name,type:t};this.$http.post("index.php?a=Api&m=changeApiAccess",n).then(function(t){200!=t.data.status&&a.$error({title:"操作失败!",content:"失败原因是:"+t.data.msg})})},fetch:function(t,e){var a=this;this.$http.get("index.php?a=Api&m=getAdminApi&user_name="+t+"&game_id="+e).then(function(t){a.loading=!1,200==t.data.status?(a.data=t.data.data,a.alter={message:"加载成功!",type:"success"}):a.alter={message:t.data.msg,type:"error"}})},getGameName:function(t){var e=this;this.$http.get("index.php?a=Api&m=getGameName&id="+t).then(function(t){200==t.data.status?e.edit_game_name=t.data.name:e.$error({title:"非法的项目ID",content:"项目ID不存在或未注册..."})})}},mounted:function(){this.game_id=this.$route.params.game_id,this.user_name=this.$route.params.user_name,this.getGameName(this.game_id),this.fetch(this.user_name,this.game_id)}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"com-item"},[a("a-input-search",{staticStyle:{width:"200px"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),a("a-button",{attrs:{type:"danger"}},[a("span",[t._v("正在编辑【"),a("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(t.user_name))]),t._v("】在【"),a("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(t.edit_game_name))]),t._v("】里的API权限...")])]),t._v(" "),a("a-tooltip",{attrs:{placement:"rightBottom"}},[a("template",{slot:"title"},[a("span",[t._v("必须成功注册API后，才可访问资源!")])])],2),t._v(" "),a("a-alert",{staticStyle:{margin:"12px 0"},attrs:{message:t.alter.message,type:t.alter.type,showIcon:"",closable:""}}),t._v(" "),a("a-table",{attrs:{columns:t.columns,dataSource:t.table_data,pagination:t.pagination,loading:t.loading},scopedSlots:t._u([{key:"game",fn:function(e,n){return a("span",{},[t._v(t._s(t.edit_game_name))])}},{key:"action",fn:function(e,n){return a("span",{},[a("a-switch",{on:{change:function(e){t.onChange(e,n.id)}},model:{value:n.status,callback:function(e){t.$set(n,"status",e)},expression:"record.status"}},[a("a-icon",{attrs:{slot:"checkedChildren",type:"check"},slot:"checkedChildren"}),t._v(" "),a("a-icon",{attrs:{slot:"unCheckedChildren",type:"close"},slot:"unCheckedChildren"})],1)],1)}}])})],1)},staticRenderFns:[]},o=a("VU/8")(s,i,!1,null,null,null);e.default=o.exports}});